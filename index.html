<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-s0cale=1.0">
    <title>Bienvenida a la Comunidad</title>
<style>
    /* --- ESTILOS GENERALES Y AJUSTABLES --- */
    html, body {
        min-height: 100%;
    }

    body {
        background-image: linear-gradient(to bottom, #582695, #984af1);
        background-attachment: fixed;
        color: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px 2.5mm;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        box-sizing: border-box;
    }

    .main-container {
        max-width: 600px;
        width: 100%;
        background-color: transparent;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* --- ESTILOS PARA LAS IMÃGENES --- */
    .welcome-image-container {
        margin-bottom: 20px;
        width: 100%;
    }
    .welcome-image-container img {
        width: 100%;
        height: auto;
        border-radius: 17px;
        display: block;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .no-shadow img {
        box-shadow: none;
    }

    /* --- ESTILOS PARA LOS RECUADROS DE TEXTO --- */
    .text-rectangle {
        background-color: #f3f0f0;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 10px;
        text-align: center;
        color: black;
        width: 100%;
        box-sizing: border-box;
    }

    .text-rectangle.large {
        font-size: 23pt;
        font-weight: normal;
    }

    .text-rectangle.small {
        font-size: 15pt;
        font-weight: normal;
        line-height: 1.4;
    }

    /* --- ESTILOS PARA EL FORMULARIO --- */
    .form-container {
        background-color: #d4f1fe;
        border: 1px solid #cccccc;
        border-radius: 10px;
        padding: 20px;
        margin-top: 20px;
        text-align: left;
        width: 100%;
        box-sizing: border-box;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: black;
        font-size: 19px;
    }

    /* Estilo para el asterisco rojo de "obligatorio" */
    .form-group label .required-asterisk {
        color: red;
        margin-left: 2px;
    }

    /* Estilos de los campos de entrada unificados */
    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
        border-radius: 5px;
        border: 1px solid black;
        background-color: white;
        font-size: 19px;
        font-family: Arial, sans-serif;
        line-height: 1.2;
        margin-bottom: 30px;
    }

    /* PROPIEDADES DE ALTURA ACTUALIZADAS */
    /* Regla para los campos que deben tener una altura fija de 54px */
    .form-group input,
    .form-group select {
        height: 54px;
        line-height: 54px;
    }
    
    /* Regla especÃ­fica para el campo de mensaje largo */
    .form-group textarea#mensaje {
        min-height: 255px;
    }

    /* ESTILO ADICIONAL: Para el texto de sugerencia "Tu respuesta" */
    .form-group input::placeholder,
    .form-group textarea::placeholder {
        color: #000000;
        opacity: 0.38;
    }

    .submit-button {
        background-color: #4CAF50;
        color: white;
        padding: 15px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        width: 100%;
        margin-top: 10px;
        margin-bottom: 15px;
    }

    /* ESTILOS PARA LA IMAGEN Y BOTÃ“N DE AGRADECIMIENTO */
    #mensaje-exito {
        display: none;
        margin-top: 20px;
        max-width: 600px;
        width: 100%;
        text-align: center;
    }

    #mensaje-exito img {
        max-width: 100%;
        height: auto;
        border-radius: 17px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .whatsapp-button {
        display: block;
        margin: 30px auto 0;
        max-width: 300px;
        padding: 15px 30px;
        text-decoration: none;
        border-radius: 50px;
        font-size: 18px;
        font-weight: bold;
        color: white;
        background-color: #25D366;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        transition: background-color 0.3s;
    }

.whatsapp-button:hover {
Â  Â  Â  Â  background-color: #128C7E;
Â  Â  }

/* *** ESTILOS CLAVE CORREGIDOS PARA EL INPUT DE TELÃ‰FONO *** */

/* Contenedor del campo de telÃ©fono */
.phone-input-container {
    display: flex; /* Hacemos que los elementos internos se pongan en lÃ­nea */
    align-items: center; /* Centrar verticalmente, aunque los inputs ya tienen la misma altura */
    margin-bottom: 30px; /* SeparaciÃ³n despuÃ©s del grupo de telÃ©fono (copiando el margin-bottom general) */
}

/* Estilo para el input del prefijo (AÃ‘ADIDO Y AJUSTADO) */
.prefix-input {
    /* ANCHO CORREGIDO: 25% */
    width: 25%;
    height: 54px;
    line-height: 54px;
    margin-right: 5px; /* PequeÃ±a separaciÃ³n del campo de nÃºmero */
    text-align: center;
    font-weight: bold;
    color: black;
    /* Estilos base */
    padding: 10px;
    box-sizing: border-box;
    border-radius: 5px;
    border: 1px solid black;
    font-size: 19px;
    font-family: Arial, sans-serif;
    /* Estilos para que parezca NO EDITABLE */
    background-color: #f0f0f0; 
    color: #333; 
    cursor: default; 
    
    margin-bottom: 0 !important; /* Sobreescribir el margen de 30px del input general */
}

/* Estilo para el input del nÃºmero de telÃ©fono (AJUSTADO) */
.form-group input[type="tel"] {
    /* ANCHO CORREGIDO: 75% */
    width: 75%; 
    padding-left: 10px;
    /* Aseguramos que herede el estilo general de input */
    border: 1px solid black;
    background-color: white;
    border-radius: 5px;
    height: 54px;
    line-height: 54px;
    
    margin-bottom: 0 !important; /* Sobreescribir el margen de 30px del input general */
}
</style>
</head>
<body>

<div class="main-container" id="main-container">
    <div class="welcome-image-container">
        <img src="images/chica-nocturna-bienvenida.jpg" alt="Chica Nocturna Bienvenida">
    </div>

    <div class="text-rectangle large">
        ğŸ‰ Â¡BIENVENIDA A LA COMUNIDAD! ğŸ¤—âœ¨
    </div>

    <div class="text-rectangle small">
        ğŸŸ¢ <b>Te felicito por tus ganas de aprender. Recuerda que tu Ãºnico Asesor es Alberto Salinas.</b>
    </div>

    <div class="text-rectangle small">
        âŒ â˜ğŸ¼<b>No te salgas del grupo</b> por que perderÃ¡s todo acceso, <b>no te quedes atrÃ¡s,</b> tÃº puedes lograr y convertirte en esa confeccionista profesional que tando deseaste ser.
    </div>

    <div class="text-rectangle small">
        ğŸ§µğŸ’– <b>#Yo si puedo #Por que soy yo y me lo merezco.</b>
    </div>

<div style="height: 100px;"></div>


    <div class="welcome-image-container no-shadow">
        <img src="images/cuentame-acerca-de-ti.jpg" alt="CuÃ©ntame acerca de ti">
    </div>

    <div class="text-rectangle small">
        ğŸ”µ <b>Te invito a responder estas preguntas,</b> que tu respuesta nos ayudarÃ¡ a conocer mÃ¡s de tÃ­ y orientarte. ğŸ˜ŠğŸ‘‡ğŸ¼
    </div>

    <div class="form-container" id="form-container">
        <p style="color: red; font-size: 14px; margin-top: -10px;">
            * Los campos con asterisco son obligatorios
        </p>
        <form action="https://script.google.com/macros/s/AKfycbxrI7FqEGnbekaTfnJSKn-CNKB0cK8graaGBDxrUd23OaocZCQkLSIioF3v2nC-_XqYIw/exec" method="POST" id="miFormulario">
            <div class="form-group">
                <label for="nombre">1ï¸âƒ£ Â¿CuÃ¡l es tu nombre?<span class="required-asterisk">*</span></label>
                <input type="text" id="nombre" name="nombre" placeholder="Tu respuesta" required>
            </div>

<div class="form-group">
    <label for="pais">2ï¸âƒ£ Â¿De quÃ© paÃ­s nos visitas? ğŸ‡µğŸ‡ª ğŸ‡¨ğŸ‡´ ğŸ‡ªğŸ‡¨ ğŸ‡²ğŸ‡½ ğŸ‡¨ğŸ‡± ğŸ‡§ğŸ‡´ ğŸ‡¬ğŸ‡¹<span class="required-asterisk">*</span></label>
    <select id="pais" name="pais" required>
        <option value="" disabled selected hidden>Selecciona tu PaÃ­s</option>
        <option value="Colombia" data-prefijo="+57">ğŸ‡¨ğŸ‡´ Colombia (+57)</option>
        <option value="Mexico" data-prefijo="+52">ğŸ‡²ğŸ‡½ MÃ©xico (+52)</option>
        <option value="Peru" data-prefijo="+51">ğŸ‡µğŸ‡ª PerÃº (+51)</option>
        <option value="Ecuador" data-prefijo="+593">ğŸ‡ªğŸ‡¨ Ecuador (+593)</option>
        <option value="Chile" data-prefijo="+56">ğŸ‡¨ğŸ‡± Chile (+56)</option>
        <option value="Bolivia" data-prefijo="+591">ğŸ‡§ğŸ‡´ Bolivia (+591)</option>
        <option value="Guatemala" data-prefijo="+502">ğŸ‡¬ğŸ‡¹ Guatemala (+502)</option>
        <option value="El-Salvador" data-prefijo="+503">ğŸ‡¸ğŸ‡» El Salvador (+503)</option>
        <option value="Argentina" data-prefijo="+54">ğŸ‡¦ğŸ‡· Argentina (+54)</option>
        <option value="Venezuela" data-prefijo="+58">ğŸ‡»ğŸ‡ª Venezuela (+58)</option>
        <option value="Honduras" data-prefijo="+504">ğŸ‡­ğŸ‡³ Honduras (+504)</option>
        <option value="Uruguay" data-prefijo="+598">ğŸ‡ºğŸ‡¾ Uruguay (+598)</option>
        <option value="Costa-Rica" data-prefijo="+506">ğŸ‡¨ğŸ‡· Costa Rica (+506)</option>
        <option value="Otro-pais" data-prefijo="--">ğŸŒ Otro paÃ­s</option>
    </select>
</div>

<div class="form-group">
    <label for="telefono_numero">3ï¸âƒ£ Tu TelÃ©fono<span class="required-asterisk">*</span></label>
    <div class="phone-input-container">
<input type="text" id="prefijo" name="prefijo_display" class="prefix-input" value="---" readonly tabindex="-1">
        <input type="tel" id="telefono_numero" name="telefono_numero" placeholder="NÃºmero de TelÃ©fono" required pattern="[0-9]*" inputmode="numeric" maxlength="15">
        <input type="hidden" id="telefono_completo" name="telefono_completo">
    </div>
</div>

            <div class="form-group">
                <label for="asesor">4ï¸âƒ£ Ya sabes que Alberto Salinas es tu Asesor? ğŸ˜<span class="required-asterisk">*</span></label>
                <select id="asesor" name="asesor" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si">SÃ­, Alberto es mi Asesor ğŸ˜Šâœ…</option>
                    <option value="no">No sÃ© quien es mi Asesor ğŸ˜°âŒ</option>
                </select>
            </div>

            <div class="form-group">
                <label for="formulario-importancia">5ï¸âƒ£ SabÃ­as que el formulario de Patronaje es importante para que aprendas tu primera toma de medidas y hacer tu primer patrÃ³n de costura? âœ‚ï¸ğŸ‘š<span class="required-asterisk">*</span></label>
                <select id="formulario-importancia" name="formulario-importancia" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="no-sabia">No lo sabÃ­a, soy nueva ğŸ˜Š</option>
                    <option value="ahora-se">SÃ­ lo sabÃ­a ğŸ˜‰</option>
                </select>
            </div>

            <div class="form-group">
                <label for="recibiste-formulario">6ï¸âƒ£ Â¿Recibiste tu formulario de Patronaje Premium? ğŸ“˜<span class="required-asterisk">*</span></label>
                <select id="recibiste-formulario" name="recibiste-formulario" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si-tengo">SÃ­, lo tengo gracias! ğŸ¤—âœ…</option>
                    <option value="no-pedi">No lo pedÃ­ ğŸ˜¥</option>
                </select>
            </div>

            <div class="form-group">
                <label for="envio-whatsapp">7ï¸âƒ£ Â¿Deseas que el Asesor Alberto te envÃ­e el Formulario de Patronaje por Whatsapp? ğŸ‘‰ğŸ¼ğŸ“²<span class="required-asterisk">*</span></label>
                <select id="envio-whatsapp" name="envio-whatsapp" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si-necesito">SÃ­ por favor, lo necesito ğŸ™ğŸ¼</option>
                    <option value="ya-tengo">Ya lo tengo! ğŸ™ŒğŸ¼</option>
                </select>
            </div>

            <div class="form-group">
                <label for="experiencia">8ï¸âƒ£ Â¿CuÃ¡l es tu nivel de Experiencia? ğŸ˜Š<span class="required-asterisk">*</span></label>
                <select id="experiencia" name="experiencia" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="principiante">Principiante ğŸ£</option>
                    <option value="intermedio">Intermedio ğŸ¤—</option>
                    <option value="avanzado">Avanzado ğŸ‘©ğŸ»â€ğŸ“</option>
                </select>
            </div>

            <div class="form-group">
                <label for="sesion-temor">9ï¸âƒ£ Â¿Estas list@ para tu primera sesiÃ³n ğŸ‘©ğŸ»â€ğŸ“ğŸ‘¨â€ğŸ“ o tienes un poco de temor ğŸ˜¨?<span class="required-asterisk">*</span></label>
                <select id="sesion-temor" name="sesion-temor" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="Estoy-lista">Estoy list@ âœŒğŸ¼</option>
                    <option value="tengo-temor">Tengo un poco de temor ğŸ¥º</option>
                </select>
            </div>

            <div class="form-group">
                <label for="maestra-isabel">1ï¸âƒ£0ï¸âƒ£ Ya conocÃ­as a la Maestra Isabel? ğŸ’ğŸ»â€â™€ï¸âœ‚ï¸ğŸ‘š<span class="required-asterisk">*</span></label>
                <select id="maestra-isabel" name="maestra-isabel" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si-la-conozco">SÃ­ la conozco ğŸ˜Š</option>
                    <option value="no-la-conocia">No la conocÃ­a â˜ºï¸</option>
                </select>
            </div>

            <div class="form-group">
                <label for="prenda">1ï¸âƒ£1ï¸âƒ£ Â¿Que prenda de vestir te gustarÃ­a aprender? ğŸ‘—ğŸ‘–ğŸ‘•ğŸ‘š<span class="required-asterisk">*</span></label>
                <input type="text" id="prenda" name="prenda" placeholder="Tu respuesta" required>
            </div>

            <div class="form-group">
                <label for="no-gusta">1ï¸âƒ£2ï¸âƒ£ Â¿QuÃ© es lo que no te gusta en el grupo? ğŸ˜°<span class="required-asterisk">*</span></label>
                <input type="text" id="no-gusta" name="no-gusta" placeholder="Tu respuesta" required>
            </div>

            <div class="form-group">
                <label for="mensaje">1ï¸âƒ£3ï¸âƒ£ EnvÃ­anos un mensaje</label>
                <textarea id="mensaje" name="mensaje"></textarea>
            </div>

            <button type="submit" class="submit-button">Enviar Respuesta</button>
        </form>
    </div>
</div>

<div id="mensaje-exito">
    <img src="images/felicidades-nos-vemos-en-whatsapp.jpg" alt="Felicidades nos vemos en WhatsApp">

    <a href="https://wa.me/+51965723248" class="whatsapp-button" target="_blank">
        Ir al chat de WhatsApp
    </a>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const formulario = document.getElementById('miFormulario');
        const mainContainer = document.getElementById('main-container');
        const mensajeExito = document.getElementById('mensaje-exito');
        
        // Elementos de PaÃ­s y TelÃ©fono (NUEVAS CONSTANTES)
        const selectPais = document.getElementById('pais');
        const inputPrefijo = document.getElementById('prefijo');
        const inputTelefono = document.getElementById('telefono_numero'); // Cambiado a telefono_numero
        const inputTelefonoCompleto = document.getElementById('telefono_completo');


        // FunciÃ³n para actualizar el prefijo del telÃ©fono y aplicar la validaciÃ³n de longitud (NUEVA FUNCIÃ“N)
        function actualizarPrefijo() {
            const selectedOption = selectPais.options[selectPais.selectedIndex];
            const prefijo = selectedOption.getAttribute('data-prefijo') || '-- ---';
            const paisValor = selectedOption.value;
            const bandera = selectedOption.text.split(' ')[0];
            
// Muestra SOLO el prefijo numÃ©rico en el input de prefijo
inputPrefijo.value = prefijo;

            // LÃ³gica de ValidaciÃ³n de Longitud (mÃ­nimo y mÃ¡ximo)
            let minLength = 7;
            let maxLength = 15; // Valor seguro por defecto
            
            switch (paisValor) {
                case 'Peru':
                case 'Colombia':
                case 'Chile':
                case 'Ecuador':
                    minLength = 9;
                    maxLength = 9;
                    break;
                case 'Mexico':
                case 'Guatemala':
                case 'El-Salvador':
                case 'Honduras':
                case 'Costa-Rica':
                    minLength = 8;
                    maxLength = 8;
                    break;
                case 'Argentina':
                case 'Venezuela':
                case 'Bolivia':
                    minLength = 10;
                    maxLength = 10;
                    break;
                case 'Uruguay':
                    minLength = 9;
                    maxLength = 9;
                    break;
                default:
                    // Default para "Otro PaÃ­s" u otros no especificados (longitud flexible)
                    minLength = 7;
                    maxLength = 15;
                    break;
            }

            // Aplica las restricciones de longitud al input de telÃ©fono
            inputTelefono.minLength = minLength;
            inputTelefono.maxLength = maxLength;
            
            // Pista visual para el usuario
            if (paisValor !== "") {
                 inputTelefono.placeholder = `NÃºmero de TelÃ©fono (${minLength} dÃ­gitos)`;
            } else {
                 inputTelefono.placeholder = `NÃºmero de TelÃ©fono`;
            }
            
            // Limpia el campo al cambiar de paÃ­s para forzar la nueva validaciÃ³n
            inputTelefono.value = '';
        }


        // Evento para cambiar el prefijo y la validaciÃ³n cuando se selecciona un paÃ­s
        selectPais.addEventListener('change', actualizarPrefijo);
        
        // Inicializar la validaciÃ³n al cargar si ya hay un valor seleccionado
        actualizarPrefijo();


        formulario.addEventListener('submit', function(event) {
            event.preventDefault();

            // 1. ANTES DE ENVIAR: Combina el prefijo y el nÃºmero en el campo oculto
       const prefijo = inputPrefijo.value.trim(); // Obtiene el cÃ³digo (+51, +57, etc.) directamente
            const numero = inputTelefono.value.trim();
            
            // Limpia el nÃºmero de espacios o guiones antes de combinar
            const numeroLimpio = numero.replace(/[^0-9]/g, '');

if (prefijo === '---' || prefijo === '--') {
                 // Si es "Otro paÃ­s", no se concatena el cÃ³digo internacional
                 inputTelefonoCompleto.value = numeroLimpio;
            } else {
                 // Concatena el prefijo (ej: +57) con el nÃºmero limpio
                 inputTelefonoCompleto.value = prefijo + numeroLimpio;
            }
            
            // 2. Comprobar la validaciÃ³n de HTML5 antes de enviar realmente
            if (formulario.checkValidity() === false) {
                 // Si no es vÃ¡lido (por ejemplo, longitud incorrecta), el navegador muestra el mensaje de error.
                 // Detenemos el envÃ­o y mostramos el error.
                 event.stopImmediatePropagation();
                 return;
            }

            // 3. EnvÃ­o y mensaje de Ã©xito (si la validaciÃ³n pasÃ³)
            mainContainer.style.display = 'none';
            mensajeExito.style.display = 'block';

            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });

            const formData = new FormData(formulario);
            const scriptURL = formulario.getAttribute('action');

            fetch(scriptURL, { method: 'POST', body: formData })
                .then(response => console.log('EnvÃ­o exitoso!', response))
                .catch(error => console.error('Error!', error));
        });
    });
</script>

</body>
</html>
