<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenida a la Comunidad</title>
<style>
    /* --- ESTILOS GENERALES Y AJUSTABLES --- */
    html, body {
        min-height: 100%;
    }

    body {
        background-image: linear-gradient(to bottom, #582695, #984af1);
        background-attachment: fixed;
        color: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px 2.5mm;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        box-sizing: border-box;
    }

    .main-container {
        max-width: 600px;
        width: 100%;
        background-color: transparent;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* --- ESTILOS PARA LAS IMÃGENES --- */
    .welcome-image-container {
        margin-bottom: 20px;
        width: 100%;
    }
    .welcome-image-container img {
        width: 100%;
        height: auto;
        border-radius: 17px;
        display: block;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .no-shadow img {
        box-shadow: none;
    }

    /* --- ESTILOS PARA LOS RECUADROS DE TEXTO --- */
    .text-rectangle {
        background-color: #f3f0f0;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 10px;
        text-align: center;
        color: black;
        width: 100%;
        box-sizing: border-box;
    }

    .text-rectangle.large {
        font-size: 23pt;
        font-weight: normal;
    }

    .text-rectangle.small {
        font-size: 15pt;
        font-weight: normal;
        line-height: 1.4;
    }

    /* --- ESTILOS PARA EL FORMULARIO --- */
    .form-container {
        background-color: #d4f1fe;
        border: 1px solid #cccccc;
        border-radius: 10px;
        padding: 20px;
        margin-top: 20px;
        text-align: left;
        width: 100%;
        box-sizing: border-box;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: black;
        font-size: 19px;
    }

    /* Estilo para el asterisco rojo de "obligatorio" */
    .form-group label .required-asterisk {
        color: red;
        margin-left: 2px;
    }

/* Estilos de los campos de entrada unificados */
Â  Â  .form-group input,
Â  Â  .form-group select,
Â  Â  .form-group textarea {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  border: 1px solid black;
Â  Â  Â  Â  background-color: white;
Â  Â  Â  Â  font-size: 19px;
Â  Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  Â  line-height: 1.2;
Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  }

/* PROPIEDADES DE ALTURA ACTUALIZADAS */
/* Regla para los campos que deben tener una altura fija de 54px */
.form-group input,
.form-group select {
    height: 54px;
}
.form-group input:not([type="tel"]) {
    /* Mantenemos line-height solo para inputs que no sean de telÃ©fono */
    line-height: 54px;
}

/* RESTAURACIÃ“N DE ESTILO: Para asegurar el tamaÃ±o de fuente y padding correcto en el select de paÃ­s */
.form-group select {
    font-size: 19px; 
    padding: 0 10px;
    /* QUITAMOS line-height para corregir el problema de altura en el selector */
}

Â  Â  /* *** ESTILOS CLAVE AÃ‘ADIDOS/MODIFICADOS PARA EL INPUT DE TELÃ‰FONO *** */
Â  Â  /* Contenedor del campo de telÃ©fono */
Â  Â  .phone-input-container {
Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  margin-bottom: 30px; /* Para mantener el espaciado entre preguntas */
Â  Â  Â  Â  height: 54px; /* Aseguramos la altura uniforme */
Â  Â  }

Â  Â  /* El campo de input en sÃ­ */
Â  Â  .form-group input[type="tel"] {
Â  Â  Â  Â  /* Usamos padding-left para que el texto NO se superponga con la bandera/prefijo */
Â  Â  Â  Â  padding-left: 120px; /* Espacio suficiente para la bandera y el prefijo */
Â  Â  Â  Â  margin-bottom: 0; /* Eliminamos el margen duplicado del input */
Â  Â  Â  Â  height: 54px; /* Aseguramos la altura uniforme */
Â  Â  Â  Â  line-height: 54px; /* Centra el texto verticalmente */
Â  Â  }

Â  Â  /* Estilo para el elemento que contendrÃ¡ el emoji y prefijo */
Â  Â  #flag-prefix-display {
Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  height: 54px;
Â  Â  Â  Â  line-height: 54px; /* Centra verticalmente */
Â  Â  Â  Â  padding: 0 10px;
Â  Â  Â  Â  color: black;
Â  Â  Â  Â  font-size: 19px;
Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  pointer-events: none; /* Permite hacer clic en el input detrÃ¡s */
Â  Â  Â  Â  background: transparent;
Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  border-right: 1px solid #ccc;
Â  Â  Â  Â  /* Asegura que el texto no se envuelva */
Â  Â  Â  Â  white-space: nowrap;
Â  Â  }
    
    /* Regla especÃ­fica para el campo de mensaje largo */
    .form-group textarea#mensaje {
        min-height: 255px;
    }

    /* ESTILO ADICIONAL: Para el texto de sugerencia "Tu respuesta" */
    .form-group input::placeholder,
    .form-group textarea::placeholder {
        color: #000000;
        opacity: 0.38;
    }

    .submit-button {
        background-color: #4CAF50;
        color: white;
        padding: 15px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        width: 100%;
        margin-top: 10px;
        margin-bottom: 15px;
    }

    /* ESTILOS PARA LA IMAGEN Y BOTÃ“N DE AGRADECIMIENTO */
    #mensaje-exito {
        display: none;
        margin-top: 20px;
        max-width: 600px;
        width: 100%;
        text-align: center;
    }

    #mensaje-exito img {
        max-width: 100%;
        height: auto;
        border-radius: 17px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .whatsapp-button {
        display: block;
        margin: 30px auto 0;
        max-width: 300px;
        padding: 15px 30px;
        text-decoration: none;
        border-radius: 50px;
        font-size: 18px;
        font-weight: bold;
        color: white;
        background-color: #25D366;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        transition: background-color 0.3s;
    }

    .whatsapp-button:hover {
        background-color: #128C7E;
    }
</style>
</head>
<body>

<div class="main-container" id="main-container">
    <div class="welcome-image-container">
        <img src="images/chica-nocturna-bienvenida.jpg" alt="Chica Nocturna Bienvenida">
    </div>

    <div class="text-rectangle large">
        ğŸ‰ Â¡BIENVENIDA A LA COMUNIDAD! ğŸ¤—âœ¨
    </div>

    <div class="text-rectangle small">
        ğŸŸ¢ <b>Te felicito por tus ganas de aprender. Recuerda que tu Ãºnico Asesor es Alberto Salinas.</b>
    </div>

    <div class="text-rectangle small">
        âŒ â˜ğŸ¼<b>No te salgas del grupo</b> por que perderÃ¡s todo acceso, <b>no te quedes atrÃ¡s,</b> tÃº puedes lograr y convertirte en esa confeccionista profesional que tando deseaste ser.
    </div>

    <div class="text-rectangle small">
        ğŸ§µğŸ’– <b>#Yo si puedo #Por que soy yo y me lo merezco.</b>
    </div>

<div style="height: 100px;"></div>


    <div class="welcome-image-container no-shadow">
        <img src="images/cuentame-acerca-de-ti.jpg" alt="CuÃ©ntame acerca de ti">
    </div>

    <div class="text-rectangle small">
        ğŸ”µ <b>Te invito a responder estas preguntas,</b> que tu respuesta nos ayudarÃ¡ a conocer mÃ¡s de tÃ­ y orientarte. ğŸ˜ŠğŸ‘‡ğŸ¼
    </div>

    <div class="form-container" id="form-container">
        <p style="color: red; font-size: 14px; margin-top: -10px;">
            * Los campos con asterisco son obligatorios
        </p>
        <form action="https://script.google.com/macros/s/AKfycbxrI7FqEGnbekaTfnJSKn-CNKB0cK8graaGBDxrUd23OaocZCQkLSIioF3v2nC-_XqYIw/exec" method="POST" id="miFormulario">
            <div class="form-group">
                <label for="nombre">1ï¸âƒ£ Â¿CuÃ¡l es tu nombre?<span class="required-asterisk">*</span></label>
                <input type="text" id="nombre" name="nombre" placeholder="Tu respuesta" required>
            </div>

<div class="form-group">
                <label for="pais">2ï¸âƒ£ Â¿De quÃ© paÃ­s nos visitas?<span class="required-asterisk">*</span></label>
                <select id="pais" name="pais" required>
                    <option value="" data-prefijo="">Selecciona tu paÃ­s</option>
                    <option value="colombia" data-prefijo="ğŸ‡¨ğŸ‡´ +57">ğŸ‡¨ğŸ‡´ Colombia</option>
                    <option value="mexico" data-prefijo="ğŸ‡²ğŸ‡½ +52">ğŸ‡²ğŸ‡½ MÃ©xico</option>
                    <option value="peru" data-prefijo="ğŸ‡µğŸ‡ª +51">ğŸ‡µğŸ‡ª PerÃº</option>
                    <option value="ecuador" data-prefijo="ğŸ‡ªğŸ‡¨ +593">ğŸ‡ªğŸ‡¨ Ecuador</option>
                    <option value="chile" data-prefijo="ğŸ‡¨ğŸ‡± +56">ğŸ‡¨ğŸ‡± Chile</option>
                    <option value="bolivia" data-prefijo="ğŸ‡§ğŸ‡´ +591">ğŸ‡§ğŸ‡´ Bolivia</option>
                    <option value="guatemala" data-prefijo="ğŸ‡¬ğŸ‡¹ +502">ğŸ‡¬ğŸ‡¹ Guatemala</option>
                    <option value="elsalvador" data-prefijo="ğŸ‡¸ğŸ‡» +503">ğŸ‡¸ğŸ‡» El Salvador</option>
                    <option value="argentina" data-prefijo="ğŸ‡¦ğŸ‡· +54">ğŸ‡¦ğŸ‡· Argentina</option>
                    <option value="venezuela" data-prefijo="ğŸ‡»ğŸ‡ª +58">ğŸ‡»ğŸ‡ª Venezuela</option>
                    <option value="honduras" data-prefijo="ğŸ‡­ğŸ‡³ +504">ğŸ‡­ğŸ‡³ Honduras</option>
                    <option value="uruguay" data-prefijo="ğŸ‡ºğŸ‡¾ +598">ğŸ‡ºğŸ‡¾ Uruguay</option>
                    <option value="costarica" data-prefijo="ğŸ‡¨ğŸ‡· +506">ğŸ‡¨ğŸ‡· Costa Rica</option>
                </select>
            </div>

            <div class="form-group">
                <label for="telefono">3ï¸âƒ£ Tu TelÃ©fono<span class="required-asterisk">*</span></label>
                <div class="phone-input-container">
                    <span id="flag-prefix-display"></span>
                    <input type="tel" id="telefono" name="telefono" required>
                </div>
            </div>

            <div class="form-group">
                <label for="asesor">4ï¸âƒ£ Ya sabes que Alberto Salinas es tu Asesor? ğŸ˜<span class="required-asterisk">*</span></label>
                <select id="asesor" name="asesor" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si">SÃ­, Alberto es mi Asesor ğŸ˜Šâœ…</option>
                    <option value="no">No sÃ© quien es mi Asesor ğŸ˜°âŒ</option>
                </select>
            </div>

            <div class="form-group">
                <label for="formulario-importancia">5ï¸âƒ£ SabÃ­as que el formulario de Patronaje es importante para que aprendas tu primera toma de medidas y hacer tu primer patrÃ³n de costura? âœ‚ï¸ğŸ‘š<span class="required-asterisk">*</span></label>
                <select id="formulario-importancia" name="formulario-importancia" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="no-sabia">No lo sabÃ­a, soy nueva ğŸ˜Š</option>
                    <option value="ahora-se">SÃ­ lo sabÃ­a ğŸ˜‰</option>
                </select>
            </div>

            <div class="form-group">
                <label for="recibiste-formulario">6ï¸âƒ£ Â¿Recibiste tu formulario de Patronaje Premium? ğŸ“˜<span class="required-asterisk">*</span></label>
                <select id="recibiste-formulario" name="recibiste-formulario" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si-tengo">SÃ­, lo tengo gracias! ğŸ¤—âœ…</option>
                    <option value="no-pedi">No lo pedÃ­ ğŸ˜¥</option>
                </select>
            </div>

            <div class="form-group">
                <label for="envio-whatsapp">7ï¸âƒ£ Â¿Deseas que el Asesor Alberto te envÃ­e el Formulario de Patronaje por Whatsapp? ğŸ‘‰ğŸ¼ğŸ“²<span class="required-asterisk">*</span></label>
                <select id="envio-whatsapp" name="envio-whatsapp" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si-necesito">SÃ­ por favor, lo necesito ğŸ™ğŸ¼</option>
                    <option value="ya-tengo">Ya lo tengo! ğŸ™ŒğŸ¼</option>
                </select>
            </div>

            <div class="form-group">
                <label for="experiencia">8ï¸âƒ£ Â¿CuÃ¡l es tu nivel de Experiencia? ğŸ˜Š<span class="required-asterisk">*</span></label>
                <select id="experiencia" name="experiencia" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="principiante">Principiante ğŸ£</option>
                    <option value="intermedio">Intermedio ğŸ¤—</option>
                    <option value="avanzado">Avanzado ğŸ‘©ğŸ»â€ğŸ“</option>
                </select>
            </div>

            <div class="form-group">
                <label for="sesion-temor">9ï¸âƒ£ Â¿Estas list@ para tu primera sesiÃ³n ğŸ‘©ğŸ»â€ğŸ“ğŸ‘¨â€ğŸ“ o tienes un poco de temor ğŸ˜¨?<span class="required-asterisk">*</span></label>
                <select id="sesion-temor" name="sesion-temor" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="Estoy-lista">Estoy list@ âœŒğŸ¼</option>
                    <option value="tengo-temor">Tengo un poco de temor ğŸ¥º</option>
                </select>
            </div>

            <div class="form-group">
                <label for="maestra-isabel">1ï¸âƒ£0ï¸âƒ£ Ya conocÃ­as a la Maestra Isabel? ğŸ’ğŸ»â€â™€ï¸âœ‚ï¸ğŸ‘š<span class="required-asterisk">*</span></label>
                <select id="maestra-isabel" name="maestra-isabel" required>
                    <option value="" disabled selected hidden>Selecciona una opciÃ³n</option>
                    <option value="si-la-conozco">SÃ­ la conozco ğŸ˜Š</option>
                    <option value="no-la-conocia">No la conocÃ­a â˜ºï¸</option>
                </select>
            </div>

            <div class="form-group">
                <label for="prenda">1ï¸âƒ£1ï¸âƒ£ Â¿Que prenda de vestir te gustarÃ­a aprender? ğŸ‘—ğŸ‘–ğŸ‘•ğŸ‘š<span class="required-asterisk">*</span></label>
                <input type="text" id="prenda" name="prenda" placeholder="Tu respuesta" required>
            </div>

            <div class="form-group">
                <label for="no-gusta">1ï¸âƒ£2ï¸âƒ£ Â¿QuÃ© es lo que no te gusta en el grupo? ğŸ˜°<span class="required-asterisk">*</span></label>
                <input type="text" id="no-gusta" name="no-gusta" placeholder="Tu respuesta" required>
            </div>

            <div class="form-group">
                <label for="comentario">1ï¸âƒ£3ï¸âƒ£ DÃ©janos un Comentario</label>
                <textarea id="comentario" name="comentario"></textarea>
            </div>

            <button type="submit" class="submit-button">Enviar Respuesta</button>
        </form>
    </div>
</div>

<div id="mensaje-exito">
    <img src="images/felicidades-nos-vemos-en-whatsapp.jpg" alt="Felicidades nos vemos en WhatsApp">

    <a href="https://wa.me/+51965723248" class="whatsapp-button" target="_blank">
        Ir al chat de WhatsApp
    </a>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const formulario = document.getElementById("miFormulario");
    const paisSelect = document.getElementById("pais");
    const telefonoInput = document.getElementById("telefono");
    const prefixDisplay = document.getElementById("flag-prefix-display");
    const submitButton = formulario.querySelector(".submit-button");

    // DefiniciÃ³n de formatos, incluye REGEX para validaciÃ³n.
    const formatos = {
        colombia: { prefijo: "+57", placeholder: "3XX XXX XXXX", regex: /^3\d{9}$/ },
        mexico: { prefijo: "+52", placeholder: "XX XXXX XXXX", regex: /^\d{10}$/ },
        peru: { prefijo: "+51", placeholder: "9XX XXX XXX", regex: /^9\d{8}$/ },
        ecuador: { prefijo: "+593", placeholder: "9XX XXX XXX", regex: /^0?9\d{8}$/ }, // Permite o no el 0 inicial
        chile: { prefijo: "+56", placeholder: "9 XXXX XXXX", regex: /^9\d{8}$/ },
        bolivia: { prefijo: "+591", placeholder: "7XX XXXX", regex: /^[67]\d{7}$/ },
        guatemala: { prefijo: "+502", placeholder: "XXXX XXXX", regex: /^[3-5]\d{7}$/ },
        elsalvador: { prefijo: "+503", placeholder: "XXXX XXXX", regex: /^[6-7]\d{7}$/ },
        argentina: { prefijo: "+54", placeholder: "9 XX XXXX XXXX", regex: /^9\d{10}$/ },
        venezuela: { prefijo: "+58", placeholder: "4XX XXX XXXX", regex: /^4\d{9}$/ },
        honduras: { prefijo: "+504", placeholder: "XXXX XXXX", regex: /^[389]\d{7}$/ },
        uruguay: { prefijo: "+598", placeholder: "9 XXXX XXXX", regex: /^9\d{7}$/ },
        costarica: { prefijo: "+506", placeholder: "XXXX XXXX", regex: /^[6-8]\d{7}$/ },
        default: { prefijo: "", placeholder: "Tu nÃºmero de telÃ©fono", regex: /^\d{5,15}$/ }
    };

    // FunciÃ³n principal para actualizar el input al cambiar el paÃ­s
    function updatePhoneInput() {
        const selectedOption = paisSelect.options[paisSelect.selectedIndex];
        const countryCode = selectedOption.value;
        const prefixDisplayValue = selectedOption.getAttribute('data-prefijo') || '';
        const format = formatos[countryCode] || formatos.default;

        // 1. Actualiza el prefijo visual
        prefixDisplay.textContent = prefixDisplayValue;

        // 2. Actualiza el placeholder
        telefonoInput.placeholder = format.placeholder;

        // 3. Limpia el valor y fuerza la re-validaciÃ³n
        validatePhone(true);
    }

    // FunciÃ³n para limpiar el input y validar
    function validatePhone() {
        // Limpia solo dÃ­gitos (no permitimos el signo + en el input directo)
        let cleanedNumber = telefonoInput.value.replace(/\D/g, '');
        telefonoInput.value = cleanedNumber;

        const countryCode = paisSelect.value;
        const format = formatos[countryCode] || formatos.default;

        // ValidaciÃ³n visual: si existe un formato, verifica el REGEX
        if (countryCode && format && format.regex) {
            if (format.regex.test(cleanedNumber)) {
                telefonoInput.style.border = '1px solid green';
            } else {
                telefonoInput.style.border = '1px solid red';
            }
        } else {
            // Si no hay paÃ­s seleccionado, volvemos al estilo por defecto
            telefonoInput.style.border = '1px solid black';
        }
    }

    // EVENT LISTENERS
    // 1. Al cambiar el paÃ­s
    paisSelect.addEventListener("change", updatePhoneInput);

    // 2. Al escribir en el input de telÃ©fono
    telefonoInput.addEventListener("input", validatePhone);

    // Inicializar el input con el valor por defecto si existe, o limpiar.
    updatePhoneInput();

    // 3. Manejo del Submit del Formulario
    formulario.addEventListener("submit", function (e) {
        e.preventDefault();
        const countryCode = paisSelect.value;
        const format = formatos[countryCode];
        let cleanedNumber = telefonoInput.value.replace(/\D/g, '');
        
        // VALIDACIÃ“N FINAL
        if (!countryCode) {
            alert("Por favor, selecciona tu paÃ­s.");
            paisSelect.focus();
            return;
        }

        if (!format || !format.regex.test(cleanedNumber)) {
            alert("El nÃºmero de telÃ©fono no es vÃ¡lido para " + paisSelect.options[paisSelect.selectedIndex].text.trim());
            telefonoInput.focus();
            return;
        }

        // --- PREPARACIÃ“N FINAL PARA EL ENVÃO ---
        // Construye el nÃºmero final con prefijo para el envÃ­o
        const finalPhoneNumber = format.prefijo + cleanedNumber;
        
        // Creamos un campo oculto para enviar el nÃºmero con prefijo a la hoja de cÃ¡lculo
        let hiddenInput = document.createElement("input");
        hiddenInput.type = "hidden";
        hiddenInput.name = "telefono"; // Usamos el nombre 'telefono' para que Google Sheets lo capture
        hiddenInput.value = finalPhoneNumber;
        formulario.appendChild(hiddenInput);

        // Proceder con el envÃ­o
        const formData = new FormData(formulario);
        submitButton.disabled = true;
        submitButton.textContent = "Enviando...";

        fetch(formulario.action, {
            method: 'POST',
            body: formData
        })
        .then(response => {
            if (response.ok) {
                // Mostrar mensaje de Ã©xito
                document.getElementById("main-container").style.display = 'none';
                document.getElementById("mensaje-exito").style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                throw new Error('Error al enviar el formulario.');
            }
        })
        .catch(error => {
            alert('Hubo un error al enviar el formulario. Intenta de nuevo.');
            console.error('Error:', error);
            submitButton.disabled = false;
            submitButton.textContent = "Enviar Respuesta";
        });
    });
});
</script>

</body>
</html>
